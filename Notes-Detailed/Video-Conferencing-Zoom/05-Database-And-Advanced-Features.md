================================================================================
         VIDEO CONFERENCING SYSTEM (ZOOM-LIKE) - HIGH LEVEL DESIGN
================================================================================

CHAPTER 5: DATABASE DESIGN AND ADVANCED FEATURES
================================================================================


================================================================================
SECTION 5.1: DATABASE DESIGN
================================================================================

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                                         â”‚
    â”‚  DATABASE CHOICES BY DATA TYPE                                         â”‚
    â”‚                                                                         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚                                                                â”‚   â”‚
    â”‚  â”‚  Data Type              Database          Why                 â”‚   â”‚
    â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚   â”‚
    â”‚  â”‚                                                                â”‚   â”‚
    â”‚  â”‚  Users, Meetings,       PostgreSQL        ACID, relationships â”‚   â”‚
    â”‚  â”‚  Billing                                                       â”‚   â”‚
    â”‚  â”‚                                                                â”‚   â”‚
    â”‚  â”‚  Session State,         Redis             Fast, ephemeral     â”‚   â”‚
    â”‚  â”‚  Presence, Mapping                                            â”‚   â”‚
    â”‚  â”‚                                                                â”‚   â”‚
    â”‚  â”‚  Chat Messages          Cassandra         High write volume,  â”‚   â”‚
    â”‚  â”‚  (persistent)                             time-series         â”‚   â”‚
    â”‚  â”‚                                                                â”‚   â”‚
    â”‚  â”‚  Analytics, Logs        Cassandra /       Write-heavy,        â”‚   â”‚
    â”‚  â”‚                         ClickHouse        analytics queries   â”‚   â”‚
    â”‚  â”‚                                                                â”‚   â”‚
    â”‚  â”‚  Recordings             S3 / GCS          Large blobs,        â”‚   â”‚
    â”‚  â”‚                                           cheap storage       â”‚   â”‚
    â”‚  â”‚                                                                â”‚   â”‚
    â”‚  â”‚  Search (recordings,    Elasticsearch     Full-text search    â”‚   â”‚
    â”‚  â”‚  transcripts)                                                 â”‚   â”‚
    â”‚  â”‚                                                                â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                                                                         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


POSTGRESQL SCHEMA
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                                         â”‚
    â”‚  USERS TABLE                                                           â”‚
    â”‚                                                                         â”‚
    â”‚  CREATE TABLE users (                                                  â”‚
    â”‚      user_id         UUID PRIMARY KEY,                                 â”‚
    â”‚      email           VARCHAR(255) UNIQUE NOT NULL,                     â”‚
    â”‚      password_hash   VARCHAR(255),                                     â”‚
    â”‚      display_name    VARCHAR(255),                                     â”‚
    â”‚      avatar_url      VARCHAR(500),                                     â”‚
    â”‚      pmi             VARCHAR(11) UNIQUE,  -- Personal Meeting ID      â”‚
    â”‚      account_type    VARCHAR(20),  -- free, pro, business             â”‚
    â”‚      timezone        VARCHAR(50),                                      â”‚
    â”‚      sso_provider    VARCHAR(50),                                      â”‚
    â”‚      sso_id          VARCHAR(255),                                     â”‚
    â”‚      created_at      TIMESTAMP DEFAULT NOW(),                          â”‚
    â”‚      updated_at      TIMESTAMP DEFAULT NOW()                           â”‚
    â”‚  );                                                                     â”‚
    â”‚                                                                         â”‚
    â”‚  CREATE INDEX idx_users_email ON users(email);                         â”‚
    â”‚  CREATE INDEX idx_users_pmi ON users(pmi);                             â”‚
    â”‚                                                                         â”‚
    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
    â”‚                                                                         â”‚
    â”‚  MEETINGS TABLE                                                        â”‚
    â”‚                                                                         â”‚
    â”‚  CREATE TABLE meetings (                                               â”‚
    â”‚      meeting_id      VARCHAR(11) PRIMARY KEY,  -- 123-456-7890        â”‚
    â”‚      host_user_id    UUID REFERENCES users(user_id),                   â”‚
    â”‚      topic           VARCHAR(255),                                     â”‚
    â”‚      password_hash   VARCHAR(255),                                     â”‚
    â”‚      meeting_type    VARCHAR(20),  -- instant, scheduled, recurring   â”‚
    â”‚      start_time      TIMESTAMP,                                        â”‚
    â”‚      duration_mins   INTEGER,                                          â”‚
    â”‚      timezone        VARCHAR(50),                                      â”‚
    â”‚      status          VARCHAR(20),  -- scheduled, started, ended       â”‚
    â”‚      settings        JSONB,  -- waiting_room, mute_on_entry, etc.    â”‚
    â”‚      recurrence      JSONB,  -- recurrence pattern                    â”‚
    â”‚      created_at      TIMESTAMP DEFAULT NOW(),                          â”‚
    â”‚      ended_at        TIMESTAMP                                         â”‚
    â”‚  );                                                                     â”‚
    â”‚                                                                         â”‚
    â”‚  CREATE INDEX idx_meetings_host ON meetings(host_user_id);             â”‚
    â”‚  CREATE INDEX idx_meetings_start ON meetings(start_time);              â”‚
    â”‚  CREATE INDEX idx_meetings_status ON meetings(status);                 â”‚
    â”‚                                                                         â”‚
    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
    â”‚                                                                         â”‚
    â”‚  MEETING PARTICIPANTS (Historical)                                     â”‚
    â”‚                                                                         â”‚
    â”‚  CREATE TABLE meeting_participants (                                   â”‚
    â”‚      id              UUID PRIMARY KEY,                                 â”‚
    â”‚      meeting_id      VARCHAR(11) REFERENCES meetings(meeting_id),      â”‚
    â”‚      user_id         UUID REFERENCES users(user_id),                   â”‚
    â”‚      display_name    VARCHAR(255),  -- for guests                     â”‚
    â”‚      email           VARCHAR(255),                                     â”‚
    â”‚      join_time       TIMESTAMP,                                        â”‚
    â”‚      leave_time      TIMESTAMP,                                        â”‚
    â”‚      duration_mins   INTEGER,                                          â”‚
    â”‚      device_type     VARCHAR(50),  -- desktop, mobile, web            â”‚
    â”‚      role            VARCHAR(20)   -- host, co-host, participant      â”‚
    â”‚  );                                                                     â”‚
    â”‚                                                                         â”‚
    â”‚  CREATE INDEX idx_participants_meeting ON meeting_participants(meeting_id);â”‚
    â”‚  CREATE INDEX idx_participants_user ON meeting_participants(user_id);     â”‚
    â”‚                                                                         â”‚
    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
    â”‚                                                                         â”‚
    â”‚  RECORDINGS TABLE                                                      â”‚
    â”‚                                                                         â”‚
    â”‚  CREATE TABLE recordings (                                             â”‚
    â”‚      recording_id    UUID PRIMARY KEY,                                 â”‚
    â”‚      meeting_id      VARCHAR(11) REFERENCES meetings(meeting_id),      â”‚
    â”‚      recording_type  VARCHAR(20),  -- cloud, shared_screen            â”‚
    â”‚      storage_path    VARCHAR(500),  -- S3 path                        â”‚
    â”‚      file_size       BIGINT,                                          â”‚
    â”‚      duration_secs   INTEGER,                                          â”‚
    â”‚      format          VARCHAR(10),  -- mp4, m4a                        â”‚
    â”‚      status          VARCHAR(20),  -- processing, ready, deleted      â”‚
    â”‚      transcript_path VARCHAR(500),                                     â”‚
    â”‚      created_at      TIMESTAMP DEFAULT NOW(),                          â”‚
    â”‚      expires_at      TIMESTAMP                                         â”‚
    â”‚  );                                                                     â”‚
    â”‚                                                                         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


REDIS DATA STRUCTURES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                                         â”‚
    â”‚  REAL-TIME DATA IN REDIS                                               â”‚
    â”‚                                                                         â”‚
    â”‚  1. ACTIVE MEETING STATE                                               â”‚
    â”‚                                                                         â”‚
    â”‚  Key: meeting:{meeting_id}:state                                       â”‚
    â”‚  Type: Hash                                                            â”‚
    â”‚  {                                                                      â”‚
    â”‚    "status": "active",                                                 â”‚
    â”‚    "host_id": "uuid",                                                  â”‚
    â”‚    "start_time": "1705000000",                                         â”‚
    â”‚    "participant_count": "15",                                          â”‚
    â”‚    "recording": "true",                                                â”‚
    â”‚    "sfu_server": "sfu-us-west-1.zoom.us"                              â”‚
    â”‚  }                                                                      â”‚
    â”‚  TTL: Auto-expire after meeting end + buffer                          â”‚
    â”‚                                                                         â”‚
    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
    â”‚                                                                         â”‚
    â”‚  2. MEETING PARTICIPANTS (Real-time)                                   â”‚
    â”‚                                                                         â”‚
    â”‚  Key: meeting:{meeting_id}:participants                                â”‚
    â”‚  Type: Hash                                                            â”‚
    â”‚  {                                                                      â”‚
    â”‚    "user_uuid_1": '{"name":"Alice","role":"host","muted":false}',    â”‚
    â”‚    "user_uuid_2": '{"name":"Bob","role":"participant","muted":true}' â”‚
    â”‚  }                                                                      â”‚
    â”‚                                                                         â”‚
    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
    â”‚                                                                         â”‚
    â”‚  3. USER PRESENCE                                                      â”‚
    â”‚                                                                         â”‚
    â”‚  Key: presence:{user_id}                                              â”‚
    â”‚  Type: Hash                                                            â”‚
    â”‚  {                                                                      â”‚
    â”‚    "status": "in_meeting",                                             â”‚
    â”‚    "meeting_id": "123-456-789",                                        â”‚
    â”‚    "device": "desktop",                                                â”‚
    â”‚    "last_active": "1705000000"                                         â”‚
    â”‚  }                                                                      â”‚
    â”‚  TTL: 60 seconds (refreshed by heartbeat)                             â”‚
    â”‚                                                                         â”‚
    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
    â”‚                                                                         â”‚
    â”‚  4. SIGNALING SERVER â†’ USER MAPPING                                    â”‚
    â”‚                                                                         â”‚
    â”‚  Key: user_connection:{user_id}                                        â”‚
    â”‚  Type: String                                                          â”‚
    â”‚  Value: "signaling-server-3.us-west-1"                                â”‚
    â”‚                                                                         â”‚
    â”‚  Used to route messages to correct signaling server                   â”‚
    â”‚                                                                         â”‚
    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
    â”‚                                                                         â”‚
    â”‚  5. MEETING â†’ SFU MAPPING                                              â”‚
    â”‚                                                                         â”‚
    â”‚  Key: meeting_sfu:{meeting_id}                                         â”‚
    â”‚  Type: String                                                          â”‚
    â”‚  Value: "sfu-us-west-2.zoom.us:5004"                                  â”‚
    â”‚                                                                         â”‚
    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
    â”‚                                                                         â”‚
    â”‚  6. WAITING ROOM                                                       â”‚
    â”‚                                                                         â”‚
    â”‚  Key: meeting:{meeting_id}:waiting_room                               â”‚
    â”‚  Type: List                                                            â”‚
    â”‚  ["user_uuid_1", "user_uuid_2", ...]                                  â”‚
    â”‚                                                                         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


================================================================================
SECTION 5.2: CHAT SYSTEM
================================================================================

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                                         â”‚
    â”‚  IN-MEETING CHAT ARCHITECTURE                                          â”‚
    â”‚                                                                         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚                                                                 â”‚  â”‚
    â”‚  â”‚  TWO TYPES:                                                    â”‚  â”‚
    â”‚  â”‚                                                                 â”‚  â”‚
    â”‚  â”‚  1. PUBLIC CHAT (to everyone)                                  â”‚  â”‚
    â”‚  â”‚     â€¢ Routed through signaling server                         â”‚  â”‚
    â”‚  â”‚     â€¢ Broadcast to all participants                           â”‚  â”‚
    â”‚  â”‚     â€¢ Stored for meeting history                              â”‚  â”‚
    â”‚  â”‚                                                                 â”‚  â”‚
    â”‚  â”‚  2. PRIVATE CHAT (to specific person)                         â”‚  â”‚
    â”‚  â”‚     â€¢ Routed through signaling server                         â”‚  â”‚
    â”‚  â”‚     â€¢ Sent only to recipient                                  â”‚  â”‚
    â”‚  â”‚     â€¢ Optional storage                                        â”‚  â”‚
    â”‚  â”‚                                                                 â”‚  â”‚
    â”‚  â”‚  FLOW:                                                         â”‚  â”‚
    â”‚  â”‚                                                                 â”‚  â”‚
    â”‚  â”‚  User A â”€â–º Signaling â”€â–º Redis Pub/Sub â”€â–º Signaling â”€â–º User B â”‚  â”‚
    â”‚  â”‚              â”‚                              â”‚                  â”‚  â”‚
    â”‚  â”‚              â”‚                              â”‚                  â”‚  â”‚
    â”‚  â”‚              â””â”€â”€â”€â”€â”€â”€â”€â–º Kafka â”€â–º Cassandra (persist)          â”‚  â”‚
    â”‚  â”‚                                                                 â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚                                                                         â”‚
    â”‚  CHAT MESSAGE SCHEMA (Cassandra):                                       â”‚
    â”‚                                                                         â”‚
    â”‚  CREATE TABLE chat_messages (                                          â”‚
    â”‚      meeting_id    TEXT,                                               â”‚
    â”‚      message_id    TIMEUUID,                                           â”‚
    â”‚      sender_id     UUID,                                               â”‚
    â”‚      sender_name   TEXT,                                               â”‚
    â”‚      recipient_id  UUID,  -- null for public                          â”‚
    â”‚      content       TEXT,                                               â”‚
    â”‚      message_type  TEXT,  -- text, file, reaction                     â”‚
    â”‚      created_at    TIMESTAMP,                                          â”‚
    â”‚      PRIMARY KEY ((meeting_id), message_id)                           â”‚
    â”‚  ) WITH CLUSTERING ORDER BY (message_id ASC);                         â”‚
    â”‚                                                                         â”‚
    â”‚  Partitioned by meeting_id for efficient retrieval                    â”‚
    â”‚                                                                         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


================================================================================
SECTION 5.3: BREAKOUT ROOMS
================================================================================

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                                         â”‚
    â”‚  BREAKOUT ROOMS ARCHITECTURE                                           â”‚
    â”‚                                                                         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚                                                                 â”‚  â”‚
    â”‚  â”‚  Main Meeting (meeting_id: 123-456-789)                        â”‚  â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
    â”‚  â”‚  â”‚                        SFU                              â”‚  â”‚  â”‚
    â”‚  â”‚  â”‚           (all participants initially)                  â”‚  â”‚  â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
    â”‚  â”‚                                                                 â”‚  â”‚
    â”‚  â”‚  Host creates breakout rooms:                                  â”‚  â”‚
    â”‚  â”‚                                                                 â”‚  â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚  â”‚
    â”‚  â”‚  â”‚ Breakout 1  â”‚  â”‚ Breakout 2  â”‚  â”‚ Breakout 3  â”‚           â”‚  â”‚
    â”‚  â”‚  â”‚ (sub-room)  â”‚  â”‚ (sub-room)  â”‚  â”‚ (sub-room)  â”‚           â”‚  â”‚
    â”‚  â”‚  â”‚ Users A,B,C â”‚  â”‚ Users D,E,F â”‚  â”‚ Users G,H,I â”‚           â”‚  â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚  â”‚
    â”‚  â”‚                                                                 â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚                                                                         â”‚
    â”‚  IMPLEMENTATION OPTIONS:                                                â”‚
    â”‚                                                                         â”‚
    â”‚  OPTION 1: Sub-rooms on same SFU                                      â”‚
    â”‚  â€¢ Breakout rooms are logical groupings                               â”‚
    â”‚  â€¢ Same SFU server handles all                                        â”‚
    â”‚  â€¢ SFU routes media only within each room                            â”‚
    â”‚  â€¢ PROS: Simple, fast switching                                       â”‚
    â”‚  â€¢ CONS: Single SFU capacity limit                                    â”‚
    â”‚                                                                         â”‚
    â”‚  OPTION 2: Separate SFU per breakout                                  â”‚
    â”‚  â€¢ Each breakout room gets own SFU                                    â”‚
    â”‚  â€¢ PROS: Scales better                                                â”‚
    â”‚  â€¢ CONS: Slower room switching, more complex                         â”‚
    â”‚                                                                         â”‚
    â”‚  ZOOM USES: Option 1 for small breakouts, Option 2 for large meetingsâ”‚
    â”‚                                                                         â”‚
    â”‚  DATA MODEL:                                                            â”‚
    â”‚                                                                         â”‚
    â”‚  meeting:{meeting_id}:breakout_rooms = {                              â”‚
    â”‚    "room_1": ["user_a", "user_b", "user_c"],                         â”‚
    â”‚    "room_2": ["user_d", "user_e", "user_f"],                         â”‚
    â”‚    "room_3": ["user_g", "user_h", "user_i"]                          â”‚
    â”‚  }                                                                      â”‚
    â”‚                                                                         â”‚
    â”‚  HOST CAPABILITIES:                                                     â”‚
    â”‚  â€¢ Create/delete rooms                                                â”‚
    â”‚  â€¢ Assign participants                                                â”‚
    â”‚  â€¢ Broadcast message to all rooms                                     â”‚
    â”‚  â€¢ Move between rooms                                                 â”‚
    â”‚  â€¢ Close all rooms (return to main)                                  â”‚
    â”‚                                                                         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


================================================================================
SECTION 5.4: VIRTUAL BACKGROUNDS
================================================================================

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                                         â”‚
    â”‚  VIRTUAL BACKGROUND IMPLEMENTATION                                     â”‚
    â”‚                                                                         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚                                                                 â”‚  â”‚
    â”‚  â”‚  PROCESSING PIPELINE (Client-side):                            â”‚  â”‚
    â”‚  â”‚                                                                 â”‚  â”‚
    â”‚  â”‚  Camera â”€â–º Segmentation â”€â–º Background Replace â”€â–º Encoder â”€â–º SFUâ”‚  â”‚
    â”‚  â”‚    â”‚           â”‚                  â”‚                            â”‚  â”‚
    â”‚  â”‚    â”‚           â”‚                  â”‚                            â”‚  â”‚
    â”‚  â”‚    â–¼           â–¼                  â–¼                            â”‚  â”‚
    â”‚  â”‚  Raw       Person mask      Composited                        â”‚  â”‚
    â”‚  â”‚  frame     (foreground)     frame                             â”‚  â”‚
    â”‚  â”‚                                                                 â”‚  â”‚
    â”‚  â”‚  SEGMENTATION APPROACHES:                                      â”‚  â”‚
    â”‚  â”‚                                                                 â”‚  â”‚
    â”‚  â”‚  1. ML Model (Most common)                                    â”‚  â”‚
    â”‚  â”‚     â€¢ TensorFlow.js / WebML                                   â”‚  â”‚
    â”‚  â”‚     â€¢ MediaPipe Selfie Segmentation                          â”‚  â”‚
    â”‚  â”‚     â€¢ Runs on GPU (WebGL)                                    â”‚  â”‚
    â”‚  â”‚     â€¢ ~30fps on modern devices                               â”‚  â”‚
    â”‚  â”‚                                                                 â”‚  â”‚
    â”‚  â”‚  2. Green Screen                                              â”‚  â”‚
    â”‚  â”‚     â€¢ Color keying (chroma key)                               â”‚  â”‚
    â”‚  â”‚     â€¢ Requires physical green screen                          â”‚  â”‚
    â”‚  â”‚     â€¢ Most accurate edges                                     â”‚  â”‚
    â”‚  â”‚                                                                 â”‚  â”‚
    â”‚  â”‚  BLUR EFFECT:                                                  â”‚  â”‚
    â”‚  â”‚  Same segmentation, but apply Gaussian blur to background    â”‚  â”‚
    â”‚  â”‚  instead of replacement                                       â”‚  â”‚
    â”‚  â”‚                                                                 â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚                                                                         â”‚
    â”‚  PERFORMANCE CONSIDERATIONS:                                            â”‚
    â”‚  â€¢ GPU required for real-time ML                                      â”‚
    â”‚  â€¢ Falls back to lower quality on weak devices                        â”‚
    â”‚  â€¢ ~10-20% additional CPU usage                                       â”‚
    â”‚                                                                         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


================================================================================
SECTION 5.5: PHONE DIAL-IN (PSTN GATEWAY)
================================================================================

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                                         â”‚
    â”‚  PSTN INTEGRATION                                                      â”‚
    â”‚                                                                         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚                                                                 â”‚  â”‚
    â”‚  â”‚  Phone User                        Zoom Infrastructure         â”‚  â”‚
    â”‚  â”‚                                                                 â”‚  â”‚
    â”‚  â”‚  ğŸ“ â”€â”€â”€ PSTN â”€â”€â–º Carrier â”€â”€â–º SIP Trunk â”€â”€â–º PSTN Gateway â”€â”€â–º SFUâ”‚  â”‚
    â”‚  â”‚                                                â”‚                â”‚  â”‚
    â”‚  â”‚                                          Transcodes:            â”‚  â”‚
    â”‚  â”‚                                          G.711 â†” Opus          â”‚  â”‚
    â”‚  â”‚                                          RTP â†” WebRTC          â”‚  â”‚
    â”‚  â”‚                                                                 â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚                                                                         â”‚
    â”‚  FLOW:                                                                  â”‚
    â”‚  1. User dials toll-free number (1-888-XXX-XXXX)                      â”‚
    â”‚  2. IVR prompts for meeting ID                                        â”‚
    â”‚  3. PSTN gateway looks up meeting                                     â”‚
    â”‚  4. Gateway joins meeting as hidden participant                       â”‚
    â”‚  5. Audio transcoded and mixed with other participants                â”‚
    â”‚                                                                         â”‚
    â”‚  PROVIDERS:                                                             â”‚
    â”‚  â€¢ Twilio (SIP trunking)                                              â”‚
    â”‚  â€¢ Bandwidth.com                                                       â”‚
    â”‚  â€¢ Direct carrier relationships                                        â”‚
    â”‚                                                                         â”‚
    â”‚  DIAL-OUT (Zoom calls you):                                            â”‚
    â”‚  Meeting host requests dial-out â†’ Gateway initiates call to phone    â”‚
    â”‚                                                                         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


================================================================================
SECTION 5.6: INTERVIEW QUESTIONS & ANSWERS
================================================================================

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                                         â”‚
    â”‚  Q1: How would you handle a meeting with 1000 participants?           â”‚
    â”‚                                                                         â”‚
    â”‚  A: Use SFU cascading architecture:                                    â”‚
    â”‚  â€¢ Split participants across multiple SFU servers (100-200 each)     â”‚
    â”‚  â€¢ SFUs connect to each other to share active speaker streams        â”‚
    â”‚  â€¢ Only forward active speaker + few recent speakers (not all 1000)  â”‚
    â”‚  â€¢ Gallery view shows video of subset, thumbnails for others         â”‚
    â”‚                                                                         â”‚
    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
    â”‚                                                                         â”‚
    â”‚  Q2: Why WebRTC over other protocols?                                  â”‚
    â”‚                                                                         â”‚
    â”‚  A: WebRTC advantages:                                                 â”‚
    â”‚  â€¢ Browser-native (no plugin)                                         â”‚
    â”‚  â€¢ Low latency (optimized for real-time)                             â”‚
    â”‚  â€¢ Built-in encryption (DTLS-SRTP)                                    â”‚
    â”‚  â€¢ NAT traversal (ICE/STUN/TURN)                                      â”‚
    â”‚  â€¢ Adaptive bitrate built-in                                          â”‚
    â”‚  Alternative: Zoom's desktop app uses proprietary protocol for        â”‚
    â”‚  additional optimizations                                              â”‚
    â”‚                                                                         â”‚
    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
    â”‚                                                                         â”‚
    â”‚  Q3: How do you ensure low latency globally?                          â”‚
    â”‚                                                                         â”‚
    â”‚  A:                                                                     â”‚
    â”‚  â€¢ Deploy SFUs in multiple regions                                    â”‚
    â”‚  â€¢ Route users to nearest SFU (geo DNS)                              â”‚
    â”‚  â€¢ Use SFU cascading for global meetings                             â”‚
    â”‚  â€¢ TURN servers at edge locations                                    â”‚
    â”‚  â€¢ UDP preferred over TCP                                            â”‚
    â”‚  â€¢ Measure RTT, optimize routing                                     â”‚
    â”‚                                                                         â”‚
    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
    â”‚                                                                         â”‚
    â”‚  Q4: SFU vs MCU - when to use each?                                   â”‚
    â”‚                                                                         â”‚
    â”‚  A:                                                                     â”‚
    â”‚  SFU (Selective Forwarding Unit):                                     â”‚
    â”‚  â€¢ Most video conferencing (Zoom, Meet, Teams)                       â”‚
    â”‚  â€¢ Lower server CPU (no transcoding)                                 â”‚
    â”‚  â€¢ Lower latency                                                      â”‚
    â”‚  â€¢ Flexible client layouts                                            â”‚
    â”‚                                                                         â”‚
    â”‚  MCU (Multipoint Control Unit):                                       â”‚
    â”‚  â€¢ PSTN gateways (phone dial-in)                                     â”‚
    â”‚  â€¢ Very weak clients (can only decode single stream)                 â”‚
    â”‚  â€¢ Fixed layout requirements                                          â”‚
    â”‚                                                                         â”‚
    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
    â”‚                                                                         â”‚
    â”‚  Q5: How does E2EE work with SFU?                                     â”‚
    â”‚                                                                         â”‚
    â”‚  A: Insertable Streams API:                                           â”‚
    â”‚  1. Client encrypts media BEFORE WebRTC encoding                     â”‚
    â”‚  2. Encrypted payload goes through normal WebRTC pipeline            â”‚
    â”‚  3. SFU forwards encrypted packets without decrypting               â”‚
    â”‚  4. Receiving client decrypts after WebRTC decoding                 â”‚
    â”‚  5. Keys exchanged via signaling (also encrypted)                   â”‚
    â”‚  Limitation: SFU can't do simulcast selection efficiently           â”‚
    â”‚                                                                         â”‚
    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
    â”‚                                                                         â”‚
    â”‚  Q6: How do you handle poor network conditions?                       â”‚
    â”‚                                                                         â”‚
    â”‚  A: Adaptive strategies:                                               â”‚
    â”‚  1. Simulcast: Sender encodes multiple resolutions                   â”‚
    â”‚  2. SFU picks appropriate quality per receiver                       â”‚
    â”‚  3. Congestion control: Reduce bitrate on packet loss                â”‚
    â”‚  4. FEC: Forward error correction for audio                          â”‚
    â”‚  5. Jitter buffer: Smooth out packet timing variations               â”‚
    â”‚  6. Graceful degradation: Video â†’ audio-only if needed              â”‚
    â”‚                                                                         â”‚
    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
    â”‚                                                                         â”‚
    â”‚  Q7: How would you implement cloud recording?                         â”‚
    â”‚                                                                         â”‚
    â”‚  A:                                                                     â”‚
    â”‚  1. Recording bot joins meeting (hidden participant)                 â”‚
    â”‚  2. Receives all streams from SFU                                    â”‚
    â”‚  3. Mixes/composes video in real-time                               â”‚
    â”‚  4. Writes to temporary storage                                      â”‚
    â”‚  5. On meeting end: Upload to S3, trigger processing                â”‚
    â”‚  6. Post-processing: Transcode, generate thumbnails, transcript     â”‚
    â”‚  7. Notify user when ready                                           â”‚
    â”‚                                                                         â”‚
    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
    â”‚                                                                         â”‚
    â”‚  Q8: Capacity estimation for 1M concurrent meetings?                  â”‚
    â”‚                                                                         â”‚
    â”‚  A:                                                                     â”‚
    â”‚  Assumptions:                                                          â”‚
    â”‚  â€¢ Average 5 participants per meeting                                â”‚
    â”‚  â€¢ 720p video: 1.5 Mbps per stream                                   â”‚
    â”‚                                                                         â”‚
    â”‚  Per meeting bandwidth:                                               â”‚
    â”‚  â€¢ Upload: 5 Ã— 1.5 = 7.5 Mbps to SFU                                â”‚
    â”‚  â€¢ Download: 5 Ã— (5-1) Ã— 1.5 = 30 Mbps from SFU (worst case)        â”‚
    â”‚  â€¢ With simulcast: ~15 Mbps from SFU                                 â”‚
    â”‚                                                                         â”‚
    â”‚  SFU capacity: ~200 participants per server                          â”‚
    â”‚  Meetings per SFU: 200/5 = 40 meetings                               â”‚
    â”‚  SFUs needed: 1M/40 = 25,000 SFU servers                             â”‚
    â”‚                                                                         â”‚
    â”‚  Plus: Signaling servers, TURN servers, storage, etc.                â”‚
    â”‚                                                                         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


================================================================================
SECTION 5.7: COMPLETE SYSTEM SUMMARY
================================================================================

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                                         â”‚
    â”‚  ZOOM-LIKE SYSTEM - KEY COMPONENTS SUMMARY                             â”‚
    â”‚                                                                         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚                                                                â”‚   â”‚
    â”‚  â”‚  Component          Technology          Purpose               â”‚   â”‚
    â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚   â”‚
    â”‚  â”‚                                                                â”‚   â”‚
    â”‚  â”‚  Media Transport    WebRTC/RTP/SRTP     Audio/video streams   â”‚   â”‚
    â”‚  â”‚  Media Server       SFU                 Route media           â”‚   â”‚
    â”‚  â”‚  Signaling          WebSocket           Coordination          â”‚   â”‚
    â”‚  â”‚  NAT Traversal      STUN/TURN           Connectivity          â”‚   â”‚
    â”‚  â”‚  Codec (Video)      H.264/VP8/VP9       Video encoding        â”‚   â”‚
    â”‚  â”‚  Codec (Audio)      Opus                Audio encoding        â”‚   â”‚
    â”‚  â”‚  User DB            PostgreSQL          Persistent data       â”‚   â”‚
    â”‚  â”‚  Real-time State    Redis               Ephemeral state       â”‚   â”‚
    â”‚  â”‚  Chat Storage       Cassandra           Message history       â”‚   â”‚
    â”‚  â”‚  Recordings         S3                  Video storage         â”‚   â”‚
    â”‚  â”‚  Message Bus        Kafka               Event streaming       â”‚   â”‚
    â”‚  â”‚  Load Balancing     GSLB + L7 LB        Traffic distribution  â”‚   â”‚
    â”‚  â”‚  CDN                CloudFront/Akamai   Static assets         â”‚   â”‚
    â”‚  â”‚                                                                â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                                                                         â”‚
    â”‚  KEY DESIGN DECISIONS:                                                  â”‚
    â”‚                                                                         â”‚
    â”‚  1. SFU over MCU (scalability, latency)                               â”‚
    â”‚  2. WebRTC for browser support                                        â”‚
    â”‚  3. Simulcast for adaptive quality                                    â”‚
    â”‚  4. Regional SFUs with cascading for global                          â”‚
    â”‚  5. E2EE optional (impacts features)                                  â”‚
    â”‚  6. CDN for webinars (scale to millions)                             â”‚
    â”‚                                                                         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


================================================================================
END OF ZOOM HLD
================================================================================

